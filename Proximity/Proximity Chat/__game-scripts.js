!function(y,m){"object"==typeof exports&&"object"==typeof module?module.exports=m():"function"==typeof define&&define.amd?define([],m):"object"==typeof exports?exports.io=m():y.io=m()}(this,(function(){return function(y){function e(g){if(m[g])return m[g].exports;var v=m[g]={exports:{},id:g,loaded:!1};return y[g].call(v.exports,v,v.exports,e),v.loaded=!0,v.exports}var m={};return e.m=y,e.c=m,e.p="",e(0)}([function(y,m,g){"use strict";function r(y,m){"object"===(void 0===y?"undefined":v(y))&&(m=y,y=void 0),m=m||{};var g,w=b(y),B=w.source,S=w.id,E=w.path,T=A[S]&&E in A[S].nsps;return m.forceNew||m["force new connection"]||!1===m.multiplex||T?(x("ignoring socket cache for %s",B),g=k(B,m)):(A[S]||(x("new io instance for %s",B),A[S]=k(B,m)),g=A[S]),w.query&&!m.query&&(m.query=w.query),g.socket(w.path,m)}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},b=g(1),w=g(7),k=g(13),x=g(3)("socket.io-client");y.exports=m=r;var A=m.managers={};m.protocol=w.protocol,m.connect=r,m.Manager=g(13),m.Socket=g(37)},function(y,m,g){(function(m){"use strict";var v=g(2),b=g(3)("socket.io-client:url");y.exports=function r(y,g){var w=y;g=g||m.location,null==y&&(y=g.protocol+"//"+g.host),"string"==typeof y&&("/"===y.charAt(0)&&(y="/"===y.charAt(1)?g.protocol+y:g.host+y),/^(https?|wss?):\/\//.test(y)||(b("protocol-less url %s",y),y=void 0!==g?g.protocol+"//"+y:"https://"+y),b("parse %s",y),w=v(y)),w.port||(/^(http|ws)$/.test(w.protocol)?w.port="80":/^(http|ws)s$/.test(w.protocol)&&(w.port="443")),w.path=w.path||"/";var k=-1!==w.host.indexOf(":")?"["+w.host+"]":w.host;return w.id=w.protocol+"://"+k+":"+w.port,w.href=w.protocol+"://"+k+(g&&g.port===w.port?"":":"+w.port),w}}).call(m,function(){return this}())},function(y,m){var g=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,v=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];y.exports=function(y){var m=y,b=y.indexOf("["),w=y.indexOf("]");-1!=b&&-1!=w&&(y=y.substring(0,b)+y.substring(b,w).replace(/:/g,";")+y.substring(w,y.length));for(var k=g.exec(y||""),x={},A=14;A--;)x[v[A]]=k[A]||"";return-1!=b&&-1!=w&&(x.source=m,x.host=x.host.substring(1,x.host.length-1).replace(/;/g,":"),x.authority=x.authority.replace("[","").replace("]","").replace(/;/g,":"),x.ipv6uri=!0),x}},function(y,m,g){(function(v){function c(){var y;try{y=m.storage.debug}catch(y){}return!y&&void 0!==v&&"env"in v&&(y=v.env.DEBUG),y}(m=y.exports=g(5)).log=function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},m.formatArgs=function i(y){var g=this.useColors;if(y[0]=(g?"%c":"")+this.namespace+(g?" %c":" ")+y[0]+(g?"%c ":" ")+"+"+m.humanize(this.diff),g){var v="color: "+this.color;y.splice(1,0,v,"color: inherit");var b=0,w=0;y[0].replace(/%[a-zA-Z%]/g,(function(y){"%%"!==y&&(b++,"%c"===y&&(w=b))})),y.splice(w,0,v)}},m.save=function a(y){try{null==y?m.storage.removeItem("debug"):m.storage.debug=y}catch(y){}},m.load=c,m.useColors=function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},m.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function p(){try{return window.localStorage}catch(y){}}(),m.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],m.formatters.j=function(y){try{return JSON.stringify(y)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},m.enable(c())}).call(m,g(4))},function(y,m){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(y){if(g===setTimeout)return setTimeout(y,0);if((g===n||!g)&&setTimeout)return g=setTimeout,setTimeout(y,0);try{return g(y,0)}catch(m){try{return g.call(null,y,0)}catch(m){return g.call(this,y,0)}}}function s(){x&&w&&(x=!1,w.length?k=w.concat(k):A=-1,k.length&&a())}function a(){if(!x){var y=o(s);x=!0;for(var m=k.length;m;){for(w=k,k=[];++A<m;)w&&w[A].run();A=-1,m=k.length}w=null,x=!1,function i(y){if(v===clearTimeout)return clearTimeout(y);if((v===r||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(y);try{return v(y)}catch(m){try{return v.call(null,y)}catch(m){return v.call(this,y)}}}(y)}}function c(y,m){this.fun=y,this.array=m}function p(){}var g,v,b=y.exports={};!function(){try{g="function"==typeof setTimeout?setTimeout:n}catch(y){g=n}try{v="function"==typeof clearTimeout?clearTimeout:r}catch(y){v=r}}();var w,k=[],x=!1,A=-1;b.nextTick=function(y){var m=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)m[g-1]=arguments[g];k.push(new c(y,m)),1!==k.length||x||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=p,b.addListener=p,b.once=p,b.off=p,b.removeListener=p,b.removeAllListeners=p,b.emit=p,b.prependListener=p,b.prependOnceListener=p,b.listeners=function(y){return[]},b.binding=function(y){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(y){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},function(y,m,g){function o(y){function n(){if(n.enabled){var y=n,g=+new Date,b=g-(v||g);y.diff=b,y.prev=v,y.curr=g,v=g;for(var w=new Array(arguments.length),k=0;k<w.length;k++)w[k]=arguments[k];w[0]=m.coerce(w[0]),"string"!=typeof w[0]&&w.unshift("%O");var x=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(function(g,v){if("%%"===g)return g;x++;var b=m.formatters[v];if("function"==typeof b){var k=w[x];g=b.call(y,k),w.splice(x,1),x--}return g})),m.formatArgs.call(y,w);var A=n.log||m.log||console.log.bind(console);A.apply(y,w)}}return n.namespace=y,n.enabled=m.enabled(y),n.useColors=m.useColors(),n.color=function r(y){var g,v=0;for(g in y)v=(v<<5)-v+y.charCodeAt(g),v|=0;return m.colors[Math.abs(v)%m.colors.length]}(y),"function"==typeof m.init&&m.init(n),n}var v;(m=y.exports=o.debug=o.default=o).coerce=function c(y){return y instanceof Error?y.stack||y.message:y},m.disable=function s(){m.enable("")},m.enable=function i(y){m.save(y),m.names=[],m.skips=[];for(var g=("string"==typeof y?y:"").split(/[\s,]+/),v=g.length,b=0;b<v;b++)g[b]&&("-"===(y=g[b].replace(/\*/g,".*?"))[0]?m.skips.push(new RegExp("^"+y.substr(1)+"$")):m.names.push(new RegExp("^"+y+"$")))},m.enabled=function a(y){var g,v;for(g=0,v=m.skips.length;g<v;g++)if(m.skips[g].test(y))return!1;for(g=0,v=m.names.length;g<v;g++)if(m.names[g].test(y))return!0;return!1},m.humanize=g(6),m.names=[],m.skips=[],m.formatters={}},function(y,m){function o(y){return i(y,w,"day")||i(y,b,"hour")||i(y,v,"minute")||i(y,g,"second")||y+" ms"}function i(y,m,g){if(!(y<m))return y<1.5*m?Math.floor(y/m)+" "+g:Math.ceil(y/m)+" "+g+"s"}var g=1e3,v=60*g,b=60*v,w=24*b,k=365.25*w;y.exports=function(y,m){m=m||{};var x=typeof y;if("string"===x&&y.length>0)return function n(y){if(!((y=String(y)).length>100)){var m=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(y);if(m){var x=parseFloat(m[1]);switch((m[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return x*k;case"days":case"day":case"d":return x*w;case"hours":case"hour":case"hrs":case"hr":case"h":return x*b;case"minutes":case"minute":case"mins":case"min":case"m":return x*v;case"seconds":case"second":case"secs":case"sec":case"s":return x*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}(y);if("number"===x&&!1===isNaN(y))return m.long?o(y):function r(y){return y>=w?Math.round(y/w)+"d":y>=b?Math.round(y/b)+"h":y>=v?Math.round(y/v)+"m":y>=g?Math.round(y/g)+"s":y+"ms"}(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))}},function(y,m,g){function r(){}function o(y){var g=""+y.type;return m.BINARY_EVENT!==y.type&&m.BINARY_ACK!==y.type||(g+=y.attachments+"-"),y.nsp&&"/"!==y.nsp&&(g+=y.nsp+","),null!=y.id&&(g+=y.id),null!=y.data&&(g+=JSON.stringify(y.data)),v("encoded %j as %s",y,g),g}function s(){this.reconstructor=null}function a(y){var g=0,b={type:Number(y.charAt(0))};if(null==m.types[b.type])return u();if(m.BINARY_EVENT===b.type||m.BINARY_ACK===b.type){for(var w="";"-"!==y.charAt(++g)&&(w+=y.charAt(g),g!=y.length););if(w!=Number(w)||"-"!==y.charAt(g))throw new Error("Illegal attachments");b.attachments=Number(w)}if("/"===y.charAt(g+1))for(b.nsp="";++g;){if(","===(x=y.charAt(g)))break;if(b.nsp+=x,g===y.length)break}else b.nsp="/";var k=y.charAt(g+1);if(""!==k&&Number(k)==k){for(b.id="";++g;){var x;if(null==(x=y.charAt(g))||Number(x)!=x){--g;break}if(b.id+=y.charAt(g),g===y.length)break}b.id=Number(b.id)}return y.charAt(++g)&&(b=function c(y,m){try{y.data=JSON.parse(m)}catch(y){return u()}return y}(b,y.substr(g))),v("decoded %s as %j",y,b),b}function p(y){this.reconPack=y,this.buffers=[]}function u(){return{type:m.ERROR,data:"parser error"}}var v=g(3)("socket.io-parser"),b=g(8),w=g(9),k=g(11),x=g(12);m.protocol=4,m.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],m.CONNECT=0,m.DISCONNECT=1,m.EVENT=2,m.ACK=3,m.ERROR=4,m.BINARY_EVENT=5,m.BINARY_ACK=6,m.Encoder=r,m.Decoder=s,r.prototype.encode=function(y,g){(y.type!==m.EVENT&&y.type!==m.ACK||!w(y.data)||(y.type=y.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK),v("encoding packet %j",y),m.BINARY_EVENT===y.type||m.BINARY_ACK===y.type)?function i(y,m){k.removeBlobs(y,(function n(y){var g=k.deconstructPacket(y),v=o(g.packet),b=g.buffers;b.unshift(v),m(b)}))}(y,g):g([o(y)])},b(s.prototype),s.prototype.add=function(y){var g;if("string"==typeof y)g=a(y),m.BINARY_EVENT===g.type||m.BINARY_ACK===g.type?(this.reconstructor=new p(g),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",g)):this.emit("decoded",g);else{if(!x(y)&&!y.base64)throw new Error("Unknown type: "+y);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(g=this.reconstructor.takeBinaryData(y))&&(this.reconstructor=null,this.emit("decoded",g))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(y){if(this.buffers.push(y),this.buffers.length===this.reconPack.attachments){var m=k.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),m}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(y,m,g){function r(y){if(y)return function o(y){for(var m in r.prototype)y[m]=r.prototype[m];return y}(y)}y.exports=r,r.prototype.on=r.prototype.addEventListener=function(y,m){return this._callbacks=this._callbacks||{},(this._callbacks["$"+y]=this._callbacks["$"+y]||[]).push(m),this},r.prototype.once=function(y,m){function n(){this.off(y,n),m.apply(this,arguments)}return n.fn=m,this.on(y,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(y,m){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var g=this._callbacks["$"+y];if(!g)return this;if(1==arguments.length)return delete this._callbacks["$"+y],this;for(var v,b=0;b<g.length;b++)if((v=g[b])===m||v.fn===m){g.splice(b,1);break}return this},r.prototype.emit=function(y){this._callbacks=this._callbacks||{};var m=[].slice.call(arguments,1),g=this._callbacks["$"+y];if(g)for(var v=0,b=(g=g.slice(0)).length;v<b;++v)g[v].apply(this,m);return this},r.prototype.listeners=function(y){return this._callbacks=this._callbacks||{},this._callbacks["$"+y]||[]},r.prototype.hasListeners=function(y){return!!this.listeners(y).length}},function(y,m,g){(function(m){var v=g(10),b=Object.prototype.toString,w="function"==typeof m.Blob||"[object BlobConstructor]"===b.call(m.Blob),k="function"==typeof m.File||"[object FileConstructor]"===b.call(m.File);y.exports=function r(y){if(!y||"object"!=typeof y)return!1;if(v(y)){for(var g=0,b=y.length;g<b;g++)if(r(y[g]))return!0;return!1}if("function"==typeof m.Buffer&&m.Buffer.isBuffer&&m.Buffer.isBuffer(y)||"function"==typeof m.ArrayBuffer&&y instanceof ArrayBuffer||w&&y instanceof Blob||k&&y instanceof File)return!0;if(y.toJSON&&"function"==typeof y.toJSON&&1===arguments.length)return r(y.toJSON(),!0);for(var x in y)if(Object.prototype.hasOwnProperty.call(y,x)&&r(y[x]))return!0;return!1}}).call(m,function(){return this}())},function(y,m){var g={}.toString;y.exports=Array.isArray||function(y){return"[object Array]"==g.call(y)}},function(y,m,g){(function(y){function r(y,m){if(!y)return y;if(b(y)){var g={_placeholder:!0,num:m.length};return m.push(y),g}if(v(y)){for(var w=new Array(y.length),k=0;k<y.length;k++)w[k]=r(y[k],m);return w}if("object"==typeof y&&!(y instanceof Date)){w={};for(var x in y)w[x]=r(y[x],m);return w}return y}function o(y,m){if(!y)return y;if(y&&y._placeholder)return m[y.num];if(v(y))for(var g=0;g<y.length;g++)y[g]=o(y[g],m);else if("object"==typeof y)for(var b in y)y[b]=o(y[b],m);return y}var v=g(10),b=g(12),w=Object.prototype.toString,k="function"==typeof y.Blob||"[object BlobConstructor]"===w.call(y.Blob),x="function"==typeof y.File||"[object FileConstructor]"===w.call(y.File);m.deconstructPacket=function(y){var m=[],g=y.data,v=y;return v.data=r(g,m),v.attachments=m.length,{packet:v,buffers:m}},m.reconstructPacket=function(y,m){return y.data=o(y.data,m),y.attachments=void 0,y},m.removeBlobs=function(y,m){var g=0,w=y;(function n(y,A,B){if(!y)return y;if(k&&y instanceof Blob||x&&y instanceof File){g++;var S=new FileReader;S.onload=function(){B?B[A]=this.result:w=this.result,--g||m(w)},S.readAsArrayBuffer(y)}else if(v(y))for(var E=0;E<y.length;E++)n(y[E],E,y);else if("object"==typeof y&&!b(y))for(var T in y)n(y[T],T,y)})(w),g||m(w)}}).call(m,function(){return this}())},function(y,m){(function(m){y.exports=function n(y){return m.Buffer&&m.Buffer.isBuffer(y)||m.ArrayBuffer&&y instanceof ArrayBuffer}}).call(m,function(){return this}())},function(y,m,g){"use strict";function r(y,m){if(!(this instanceof r))return new r(y,m);y&&"object"===(void 0===y?"undefined":v(y))&&(m=y,y=void 0),(m=m||{}).path=m.path||"/socket.io",this.nsps={},this.subs=[],this.opts=m,this.reconnection(!1!==m.reconnection),this.reconnectionAttempts(m.reconnectionAttempts||1/0),this.reconnectionDelay(m.reconnectionDelay||1e3),this.reconnectionDelayMax(m.reconnectionDelayMax||5e3),this.randomizationFactor(m.randomizationFactor||.5),this.backoff=new T({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==m.timeout?2e4:m.timeout),this.readyState="closed",this.uri=y,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var g=m.parser||x;this.encoder=new g.Encoder,this.decoder=new g.Decoder,this.autoConnect=!1!==m.autoConnect,this.autoConnect&&this.open()}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},b=g(14),w=g(37),k=g(8),x=g(7),A=g(39),B=g(40),S=g(3)("socket.io-client:manager"),E=g(36),T=g(41),C=Object.prototype.hasOwnProperty;y.exports=r,r.prototype.emitAll=function(){for(var y in this.emit.apply(this,arguments),this.nsps)C.call(this.nsps,y)&&this.nsps[y].emit.apply(this.nsps[y],arguments)},r.prototype.updateSocketIds=function(){for(var y in this.nsps)C.call(this.nsps,y)&&(this.nsps[y].id=this.generateId(y))},r.prototype.generateId=function(y){return("/"===y?"":y+"#")+this.engine.id},k(r.prototype),r.prototype.reconnection=function(y){return arguments.length?(this._reconnection=!!y,this):this._reconnection},r.prototype.reconnectionAttempts=function(y){return arguments.length?(this._reconnectionAttempts=y,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(y){return arguments.length?(this._reconnectionDelay=y,this.backoff&&this.backoff.setMin(y),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(y){return arguments.length?(this._randomizationFactor=y,this.backoff&&this.backoff.setJitter(y),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(y){return arguments.length?(this._reconnectionDelayMax=y,this.backoff&&this.backoff.setMax(y),this):this._reconnectionDelayMax},r.prototype.timeout=function(y){return arguments.length?(this._timeout=y,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(y,m){if(S("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;S("opening %s",this.uri),this.engine=b(this.uri,this.opts);var g=this.engine,v=this;this.readyState="opening",this.skipReconnect=!1;var w=A(g,"open",(function(){v.onopen(),y&&y()})),k=A(g,"error",(function(m){if(S("connect_error"),v.cleanup(),v.readyState="closed",v.emitAll("connect_error",m),y){var g=new Error("Connection error");g.data=m,y(g)}else v.maybeReconnectOnOpen()}));if(!1!==this._timeout){var x=this._timeout;S("connect attempt will timeout after %d",x);var B=setTimeout((function(){S("connect attempt timed out after %d",x),w.destroy(),g.close(),g.emit("error","timeout"),v.emitAll("connect_timeout",x)}),x);this.subs.push({destroy:function(){clearTimeout(B)}})}return this.subs.push(w),this.subs.push(k),this},r.prototype.onopen=function(){S("open"),this.cleanup(),this.readyState="open",this.emit("open");var y=this.engine;this.subs.push(A(y,"data",B(this,"ondata"))),this.subs.push(A(y,"ping",B(this,"onping"))),this.subs.push(A(y,"pong",B(this,"onpong"))),this.subs.push(A(y,"error",B(this,"onerror"))),this.subs.push(A(y,"close",B(this,"onclose"))),this.subs.push(A(this.decoder,"decoded",B(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(y){this.decoder.add(y)},r.prototype.ondecoded=function(y){this.emit("packet",y)},r.prototype.onerror=function(y){S("error",y),this.emitAll("error",y)},r.prototype.socket=function(y,m){function n(){~E(v.connecting,g)||v.connecting.push(g)}var g=this.nsps[y];if(!g){g=new w(this,y,m),this.nsps[y]=g;var v=this;g.on("connecting",n),g.on("connect",(function(){g.id=v.generateId(y)})),this.autoConnect&&n()}return g},r.prototype.destroy=function(y){var m=E(this.connecting,y);~m&&this.connecting.splice(m,1),this.connecting.length||this.close()},r.prototype.packet=function(y){S("writing packet %j",y);var m=this;y.query&&0===y.type&&(y.nsp+="?"+y.query),m.encoding?m.packetBuffer.push(y):(m.encoding=!0,this.encoder.encode(y,(function(g){for(var v=0;v<g.length;v++)m.engine.write(g[v],y.options);m.encoding=!1,m.processPacketQueue()})))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var y=this.packetBuffer.shift();this.packet(y)}},r.prototype.cleanup=function(){S("cleanup");for(var y=this.subs.length,m=0;m<y;m++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){S("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(y){S("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",y),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var y=this;if(this.backoff.attempts>=this._reconnectionAttempts)S("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var m=this.backoff.duration();S("will wait %dms before reconnect attempt",m),this.reconnecting=!0;var g=setTimeout((function(){y.skipReconnect||(S("attempting reconnect"),y.emitAll("reconnect_attempt",y.backoff.attempts),y.emitAll("reconnecting",y.backoff.attempts),y.skipReconnect||y.open((function(m){m?(S("reconnect attempt error"),y.reconnecting=!1,y.reconnect(),y.emitAll("reconnect_error",m.data)):(S("reconnect success"),y.onreconnect())})))}),m);this.subs.push({destroy:function(){clearTimeout(g)}})}},r.prototype.onreconnect=function(){var y=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",y)}},function(y,m,g){y.exports=g(15),y.exports.parser=g(22)},function(y,m,g){(function(m){function r(y,g){if(!(this instanceof r))return new r(y,g);g=g||{},y&&"object"==typeof y&&(g=y,y=null),y?(y=A(y),g.hostname=y.host,g.secure="https"===y.protocol||"wss"===y.protocol,g.port=y.port,y.query&&(g.query=y.query)):g.host&&(g.hostname=A(g.host).host),this.secure=null!=g.secure?g.secure:m.location&&"https:"===location.protocol,g.hostname&&!g.port&&(g.port=this.secure?"443":"80"),this.agent=g.agent||!1,this.hostname=g.hostname||(m.location?location.hostname:"localhost"),this.port=g.port||(m.location&&location.port?location.port:this.secure?443:80),this.query=g.query||{},"string"==typeof this.query&&(this.query=B.decode(this.query)),this.upgrade=!1!==g.upgrade,this.path=(g.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!g.forceJSONP,this.jsonp=!1!==g.jsonp,this.forceBase64=!!g.forceBase64,this.enablesXDR=!!g.enablesXDR,this.timestampParam=g.timestampParam||"t",this.timestampRequests=g.timestampRequests,this.transports=g.transports||["polling","websocket"],this.transportOptions=g.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=g.policyPort||843,this.rememberUpgrade=g.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=g.onlyBinaryUpgrades,this.perMessageDeflate=!1!==g.perMessageDeflate&&(g.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=g.pfx||null,this.key=g.key||null,this.passphrase=g.passphrase||null,this.cert=g.cert||null,this.ca=g.ca||null,this.ciphers=g.ciphers||null,this.rejectUnauthorized=void 0===g.rejectUnauthorized||g.rejectUnauthorized,this.forceNode=!!g.forceNode;var v="object"==typeof m&&m;v.global===v&&(g.extraHeaders&&Object.keys(g.extraHeaders).length>0&&(this.extraHeaders=g.extraHeaders),g.localAddress&&(this.localAddress=g.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var v=g(16),b=g(8),w=g(3)("engine.io-client:socket"),k=g(36),x=g(22),A=g(2),B=g(30);y.exports=r,r.priorWebsocketSuccess=!1,b(r.prototype),r.protocol=x.protocol,r.Socket=r,r.Transport=g(21),r.transports=g(16),r.parser=g(22),r.prototype.createTransport=function(y){w('creating transport "%s"',y);var m=function o(y){var m={};for(var g in y)y.hasOwnProperty(g)&&(m[g]=y[g]);return m}(this.query);m.EIO=x.protocol,m.transport=y;var g=this.transportOptions[y]||{};return this.id&&(m.sid=this.id),new v[y]({query:m,socket:this,agent:g.agent||this.agent,hostname:g.hostname||this.hostname,port:g.port||this.port,secure:g.secure||this.secure,path:g.path||this.path,forceJSONP:g.forceJSONP||this.forceJSONP,jsonp:g.jsonp||this.jsonp,forceBase64:g.forceBase64||this.forceBase64,enablesXDR:g.enablesXDR||this.enablesXDR,timestampRequests:g.timestampRequests||this.timestampRequests,timestampParam:g.timestampParam||this.timestampParam,policyPort:g.policyPort||this.policyPort,pfx:g.pfx||this.pfx,key:g.key||this.key,passphrase:g.passphrase||this.passphrase,cert:g.cert||this.cert,ca:g.ca||this.ca,ciphers:g.ciphers||this.ciphers,rejectUnauthorized:g.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:g.perMessageDeflate||this.perMessageDeflate,extraHeaders:g.extraHeaders||this.extraHeaders,forceNode:g.forceNode||this.forceNode,localAddress:g.localAddress||this.localAddress,requestTimeout:g.requestTimeout||this.requestTimeout,protocols:g.protocols||void 0})},r.prototype.open=function(){var y;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))y="websocket";else{if(0===this.transports.length){var m=this;return void setTimeout((function(){m.emit("error","No transports available")}),0)}y=this.transports[0]}this.readyState="opening";try{y=this.createTransport(y)}catch(y){return this.transports.shift(),void this.open()}y.open(),this.setTransport(y)},r.prototype.setTransport=function(y){w("setting transport %s",y.name);var m=this;this.transport&&(w("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=y,y.on("drain",(function(){m.onDrain()})).on("packet",(function(y){m.onPacket(y)})).on("error",(function(y){m.onError(y)})).on("close",(function(){m.onClose("transport close")}))},r.prototype.probe=function(y){function e(){if(v.onlyBinaryUpgrades){var b=!this.supportsBinary&&v.transport.supportsBinary;g=g||b}g||(w('probe transport "%s" opened',y),m.send([{type:"ping",data:"probe"}]),m.once("packet",(function(b){if(!g)if("pong"===b.type&&"probe"===b.data){if(w('probe transport "%s" pong',y),v.upgrading=!0,v.emit("upgrading",m),!m)return;r.priorWebsocketSuccess="websocket"===m.name,w('pausing current transport "%s"',v.transport.name),v.transport.pause((function(){g||"closed"!==v.readyState&&(w("changing transport and sending upgrade packet"),p(),v.setTransport(m),m.send([{type:"upgrade"}]),v.emit("upgrade",m),m=null,v.upgrading=!1,v.flush())}))}else{w('probe transport "%s" failed',y);var k=new Error("probe error");k.transport=m.name,v.emit("upgradeError",k)}})))}function n(){g||(g=!0,p(),m.close(),m=null)}function o(g){var b=new Error("probe error: "+g);b.transport=m.name,n(),w('probe transport "%s" failed because of error: %s',y,g),v.emit("upgradeError",b)}function i(){o("transport closed")}function s(){o("socket closed")}function c(y){m&&y.name!==m.name&&(w('"%s" works - aborting "%s"',y.name,m.name),n())}function p(){m.removeListener("open",e),m.removeListener("error",o),m.removeListener("close",i),v.removeListener("close",s),v.removeListener("upgrading",c)}w('probing transport "%s"',y);var m=this.createTransport(y,{probe:1}),g=!1,v=this;r.priorWebsocketSuccess=!1,m.once("open",e),m.once("error",o),m.once("close",i),this.once("close",s),this.once("upgrading",c),m.open()},r.prototype.onOpen=function(){if(w("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){w("starting upgrade probes");for(var y=0,m=this.upgrades.length;y<m;y++)this.probe(this.upgrades[y])}},r.prototype.onPacket=function(y){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(w('socket receive: type "%s", data "%s"',y.type,y.data),this.emit("packet",y),this.emit("heartbeat"),y.type){case"open":this.onHandshake(JSON.parse(y.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var m=new Error("server error");m.code=y.data,this.onError(m);break;case"message":this.emit("data",y.data),this.emit("message",y.data)}else w('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(y){this.emit("handshake",y),this.id=y.sid,this.transport.query.sid=y.sid,this.upgrades=this.filterUpgrades(y.upgrades),this.pingInterval=y.pingInterval,this.pingTimeout=y.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(y){clearTimeout(this.pingTimeoutTimer);var m=this;m.pingTimeoutTimer=setTimeout((function(){"closed"!==m.readyState&&m.onClose("ping timeout")}),y||m.pingInterval+m.pingTimeout)},r.prototype.setPing=function(){var y=this;clearTimeout(y.pingIntervalTimer),y.pingIntervalTimer=setTimeout((function(){w("writing ping packet - expecting pong within %sms",y.pingTimeout),y.ping(),y.onHeartbeat(y.pingTimeout)}),y.pingInterval)},r.prototype.ping=function(){var y=this;this.sendPacket("ping",(function(){y.emit("ping")}))},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(w("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(y,m,g){return this.sendPacket("message",y,m,g),this},r.prototype.sendPacket=function(y,m,g,v){if("function"==typeof m&&(v=m,m=void 0),"function"==typeof g&&(v=g,g=null),"closing"!==this.readyState&&"closed"!==this.readyState){(g=g||{}).compress=!1!==g.compress;var b={type:y,data:m,options:g};this.emit("packetCreate",b),this.writeBuffer.push(b),v&&this.once("flush",v),this.flush()}},r.prototype.close=function(){function t(){y.onClose("forced close"),w("socket closing - telling transport to close"),y.transport.close()}function e(){y.removeListener("upgrade",e),y.removeListener("upgradeError",e),t()}function n(){y.once("upgrade",e),y.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var y=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}return this},r.prototype.onError=function(y){w("socket error %j",y),r.priorWebsocketSuccess=!1,this.emit("error",y),this.onClose("transport error",y)},r.prototype.onClose=function(y,m){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){w('socket close with reason: "%s"',y);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",y,m),this.writeBuffer=[],this.prevBufferLen=0}},r.prototype.filterUpgrades=function(y){for(var m=[],g=0,v=y.length;g<v;g++)~k(this.transports,y[g])&&m.push(y[g]);return m}}).call(m,function(){return this}())},function(y,m,g){(function(y){var v=g(17),b=g(19),w=g(33),k=g(34);m.polling=function r(m){var g=!1,k=!1,x=!1!==m.jsonp;if(y.location){var A="https:"===location.protocol,B=location.port;B||(B=A?443:80),g=m.hostname!==location.hostname||B!==m.port,k=m.secure!==A}if(m.xdomain=g,m.xscheme=k,"open"in new v(m)&&!m.forceJSONP)return new b(m);if(!x)throw new Error("JSONP disabled");return new w(m)},m.websocket=k}).call(m,function(){return this}())},function(y,m,g){(function(m){var v=g(18);y.exports=function(y){var g=y.xdomain,b=y.xscheme,w=y.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!g||v))return new XMLHttpRequest}catch(y){}try{if("undefined"!=typeof XDomainRequest&&!b&&w)return new XDomainRequest}catch(y){}if(!g)try{return new(m[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(y){}}}).call(m,function(){return this}())},function(y,m){try{y.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(m){y.exports=!1}},function(y,m,g){(function(m){function r(){}function o(y){if(b.call(this,y),this.requestTimeout=y.requestTimeout,this.extraHeaders=y.extraHeaders,m.location){var g="https:"===location.protocol,v=location.port;v||(v=g?443:80),this.xd=y.hostname!==m.location.hostname||v!==y.port,this.xs=y.secure!==g}}function i(y){this.method=y.method||"GET",this.uri=y.uri,this.xd=!!y.xd,this.xs=!!y.xs,this.async=!1!==y.async,this.data=void 0!==y.data?y.data:null,this.agent=y.agent,this.isBinary=y.isBinary,this.supportsBinary=y.supportsBinary,this.enablesXDR=y.enablesXDR,this.requestTimeout=y.requestTimeout,this.pfx=y.pfx,this.key=y.key,this.passphrase=y.passphrase,this.cert=y.cert,this.ca=y.ca,this.ciphers=y.ciphers,this.rejectUnauthorized=y.rejectUnauthorized,this.extraHeaders=y.extraHeaders,this.create()}function s(){for(var y in i.requests)i.requests.hasOwnProperty(y)&&i.requests[y].abort()}var v=g(17),b=g(20),w=g(8),k=g(31),x=g(3)("engine.io-client:polling-xhr");y.exports=o,y.exports.Request=i,k(o,b),o.prototype.supportsBinary=!0,o.prototype.request=function(y){return(y=y||{}).uri=this.uri(),y.xd=this.xd,y.xs=this.xs,y.agent=this.agent||!1,y.supportsBinary=this.supportsBinary,y.enablesXDR=this.enablesXDR,y.pfx=this.pfx,y.key=this.key,y.passphrase=this.passphrase,y.cert=this.cert,y.ca=this.ca,y.ciphers=this.ciphers,y.rejectUnauthorized=this.rejectUnauthorized,y.requestTimeout=this.requestTimeout,y.extraHeaders=this.extraHeaders,new i(y)},o.prototype.doWrite=function(y,m){var g="string"!=typeof y&&void 0!==y,v=this.request({method:"POST",data:y,isBinary:g}),b=this;v.on("success",m),v.on("error",(function(y){b.onError("xhr post error",y)})),this.sendXhr=v},o.prototype.doPoll=function(){x("xhr poll");var y=this.request(),m=this;y.on("data",(function(y){m.onData(y)})),y.on("error",(function(y){m.onError("xhr poll error",y)})),this.pollXhr=y},w(i.prototype),i.prototype.create=function(){var y={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};y.pfx=this.pfx,y.key=this.key,y.passphrase=this.passphrase,y.cert=this.cert,y.ca=this.ca,y.ciphers=this.ciphers,y.rejectUnauthorized=this.rejectUnauthorized;var g=this.xhr=new v(y),b=this;try{x("xhr open %s: %s",this.method,this.uri),g.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var w in g.setDisableHeaderCheck&&g.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(w)&&g.setRequestHeader(w,this.extraHeaders[w])}catch(y){}if("POST"===this.method)try{this.isBinary?g.setRequestHeader("Content-type","application/octet-stream"):g.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(y){}try{g.setRequestHeader("Accept","*/*")}catch(y){}"withCredentials"in g&&(g.withCredentials=!0),this.requestTimeout&&(g.timeout=this.requestTimeout),this.hasXDR()?(g.onload=function(){b.onLoad()},g.onerror=function(){b.onError(g.responseText)}):g.onreadystatechange=function(){if(2===g.readyState){var y;try{y=g.getResponseHeader("Content-Type")}catch(y){}"application/octet-stream"===y&&(g.responseType="arraybuffer")}4===g.readyState&&(200===g.status||1223===g.status?b.onLoad():setTimeout((function(){b.onError(g.status)}),0))},x("xhr data %s",this.data),g.send(this.data)}catch(y){return void setTimeout((function(){b.onError(y)}),0)}m.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(y){this.emit("data",y),this.onSuccess()},i.prototype.onError=function(y){this.emit("error",y),this.cleanup(!0)},i.prototype.cleanup=function(y){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,y)try{this.xhr.abort()}catch(y){}m.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var y;try{var m;try{m=this.xhr.getResponseHeader("Content-Type")}catch(y){}y="application/octet-stream"===m&&this.xhr.response||this.xhr.responseText}catch(y){this.onError(y)}null!=y&&this.onData(y)},i.prototype.hasXDR=function(){return void 0!==m.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},m.document&&(m.attachEvent?m.attachEvent("onunload",s):m.addEventListener&&m.addEventListener("beforeunload",s,!1))}).call(m,function(){return this}())},function(y,m,g){function r(y){var m=y&&y.forceBase64;B&&!m||(this.supportsBinary=!1),v.call(this,y)}var v=g(21),b=g(30),w=g(22),k=g(31),x=g(32),A=g(3)("engine.io-client:polling");y.exports=r;var B=null!=new(g(17))({xdomain:!1}).responseType;k(r,v),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(y){function e(){A("paused"),m.readyState="paused",y()}var m=this;if(this.readyState="pausing",this.polling||!this.writable){var g=0;this.polling&&(A("we are currently polling - waiting to pause"),g++,this.once("pollComplete",(function(){A("pre-pause polling complete"),--g||e()}))),this.writable||(A("we are currently writing - waiting to pause"),g++,this.once("drain",(function(){A("pre-pause writing complete"),--g||e()})))}else e()},r.prototype.poll=function(){A("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(y){var m=this;A("polling got data %s",y);w.decodePayload(y,this.socket.binaryType,(function(y,g,v){return"opening"===m.readyState&&m.onOpen(),"close"===y.type?(m.onClose(),!1):void m.onPacket(y)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():A('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){A("writing close packet"),y.write([{type:"close"}])}var y=this;"open"===this.readyState?(A("transport open - closing"),t()):(A("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(y){var m=this;this.writable=!1;var n=function(){m.writable=!0,m.emit("drain")};w.encodePayload(y,this.supportsBinary,(function(y){m.doWrite(y,n)}))},r.prototype.uri=function(){var y=this.query||{},m=this.secure?"https":"http",g="";return!1!==this.timestampRequests&&(y[this.timestampParam]=x()),this.supportsBinary||y.sid||(y.b64=1),y=b.encode(y),this.port&&("https"===m&&443!==Number(this.port)||"http"===m&&80!==Number(this.port))&&(g=":"+this.port),y.length&&(y="?"+y),m+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+g+this.path+y}},function(y,m,g){function r(y){this.path=y.path,this.hostname=y.hostname,this.port=y.port,this.secure=y.secure,this.query=y.query,this.timestampParam=y.timestampParam,this.timestampRequests=y.timestampRequests,this.readyState="",this.agent=y.agent||!1,this.socket=y.socket,this.enablesXDR=y.enablesXDR,this.pfx=y.pfx,this.key=y.key,this.passphrase=y.passphrase,this.cert=y.cert,this.ca=y.ca,this.ciphers=y.ciphers,this.rejectUnauthorized=y.rejectUnauthorized,this.forceNode=y.forceNode,this.extraHeaders=y.extraHeaders,this.localAddress=y.localAddress}var v=g(22),b=g(8);y.exports=r,b(r.prototype),r.prototype.onError=function(y,m){var g=new Error(y);return g.type="TransportError",g.description=m,this.emit("error",g),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(y){if("open"!==this.readyState)throw new Error("Transport not open");this.write(y)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(y){var m=v.decodePacket(y,this.socket.binaryType);this.onPacket(m)},r.prototype.onPacket=function(y){this.emit("packet",y)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(y,m,g){(function(y){function r(y,g){return g("b"+m.packets[y.type]+y.data.data)}function o(y,g,v){if(!g)return m.encodeBase64Packet(y,v);var b=y.data,w=new Uint8Array(b),k=new Uint8Array(1+b.byteLength);k[0]=T[y.type];for(var x=0;x<w.length;x++)k[x+1]=w[x];return v(k.buffer)}function s(y,g,v){if(!g)return m.encodeBase64Packet(y,v);if(E)return function i(y,g,v){if(!g)return m.encodeBase64Packet(y,v);var b=new FileReader;return b.onload=function(){y.data=b.result,m.encodePacket(y,g,!0,v)},b.readAsArrayBuffer(y.data)}(y,g,v);var b=new Uint8Array(1);return b[0]=T[y.type],v(new P([b.buffer,y.data]))}function c(y,m,g){for(var v=new Array(y.length),b=x(y.length,g),i=function(y,g,b){m(g,(function(m,g){v[y]=g,b(m,v)}))},w=0;w<y.length;w++)i(w,y[w],b)}var v,b=g(23),w=g(9),k=g(24),x=g(25),A=g(26);y&&y.ArrayBuffer&&(v=g(28));var B="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),S="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),E=B||S;m.protocol=3;var T=m.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},C=b(T),N={type:"error",data:"parser error"},P=g(29);m.encodePacket=function(m,g,v,b){"function"==typeof g&&(b=g,g=!1),"function"==typeof v&&(b=v,v=null);var w=void 0===m.data?void 0:m.data.buffer||m.data;if(y.ArrayBuffer&&w instanceof ArrayBuffer)return o(m,g,b);if(P&&w instanceof y.Blob)return s(m,g,b);if(w&&w.base64)return r(m,b);var k=T[m.type];return void 0!==m.data&&(k+=v?A.encode(String(m.data),{strict:!1}):String(m.data)),b(""+k)},m.encodeBase64Packet=function(g,v){var b,w="b"+m.packets[g.type];if(P&&g.data instanceof y.Blob){var k=new FileReader;return k.onload=function(){var y=k.result.split(",")[1];v(w+y)},k.readAsDataURL(g.data)}try{b=String.fromCharCode.apply(null,new Uint8Array(g.data))}catch(y){for(var x=new Uint8Array(g.data),A=new Array(x.length),B=0;B<x.length;B++)A[B]=x[B];b=String.fromCharCode.apply(null,A)}return w+=y.btoa(b),v(w)},m.decodePacket=function(y,g,v){if(void 0===y)return N;if("string"==typeof y){if("b"===y.charAt(0))return m.decodeBase64Packet(y.substr(1),g);if(v&&!1===(y=function a(y){try{y=A.decode(y,{strict:!1})}catch(y){return!1}return y}(y)))return N;var b=y.charAt(0);return Number(b)==b&&C[b]?y.length>1?{type:C[b],data:y.substring(1)}:{type:C[b]}:N}b=new Uint8Array(y)[0];var w=k(y,1);return P&&"blob"===g&&(w=new P([w])),{type:C[b],data:w}},m.decodeBase64Packet=function(y,m){var g=C[y.charAt(0)];if(!v)return{type:g,data:{base64:!0,data:y.substr(1)}};var b=v.decode(y.substr(1));return"blob"===m&&P&&(b=new P([b])),{type:g,data:b}},m.encodePayload=function(y,g,v){"function"==typeof g&&(v=g,g=null);var b=w(y);return g&&b?P&&!E?m.encodePayloadAsBlob(y,v):m.encodePayloadAsArrayBuffer(y,v):y.length?void c(y,(function i(y,v){m.encodePacket(y,!!b&&g,!1,(function(y){v(null,function o(y){return y.length+":"+y}(y))}))}),(function(y,m){return v(m.join(""))})):v("0:")},m.decodePayload=function(y,g,v){if("string"!=typeof y)return m.decodePayloadAsBinary(y,g,v);var b;if("function"==typeof g&&(v=g,g=null),""===y)return v(N,0,1);for(var w,k,x="",A=0,B=y.length;A<B;A++){var S=y.charAt(A);if(":"===S){if(""===x||x!=(w=Number(x)))return v(N,0,1);if(x!=(k=y.substr(A+1,w)).length)return v(N,0,1);if(k.length){if(b=m.decodePacket(k,g,!1),N.type===b.type&&N.data===b.data)return v(N,0,1);if(!1===v(b,A+w,B))return}A+=w,x=""}else x+=S}return""!==x?v(N,0,1):void 0},m.encodePayloadAsArrayBuffer=function(y,g){return y.length?void c(y,(function r(y,g){m.encodePacket(y,!0,!0,(function(y){return g(null,y)}))}),(function(y,m){var v=m.reduce((function(y,m){var g;return y+(g="string"==typeof m?m.length:m.byteLength).toString().length+g+2}),0),b=new Uint8Array(v),w=0;return m.forEach((function(y){var m="string"==typeof y,g=y;if(m){for(var v=new Uint8Array(y.length),k=0;k<y.length;k++)v[k]=y.charCodeAt(k);g=v.buffer}b[w++]=m?0:1;var x=g.byteLength.toString();for(k=0;k<x.length;k++)b[w++]=parseInt(x[k]);b[w++]=255;for(v=new Uint8Array(g),k=0;k<v.length;k++)b[w++]=v[k]})),g(b.buffer)})):g(new ArrayBuffer(0))},m.encodePayloadAsBlob=function(y,g){c(y,(function r(y,g){m.encodePacket(y,!0,!0,(function(y){var m=new Uint8Array(1);if(m[0]=1,"string"==typeof y){for(var v=new Uint8Array(y.length),b=0;b<y.length;b++)v[b]=y.charCodeAt(b);y=v.buffer,m[0]=0}var w=(y instanceof ArrayBuffer?y.byteLength:y.size).toString(),k=new Uint8Array(w.length+1);for(b=0;b<w.length;b++)k[b]=parseInt(w[b]);if(k[w.length]=255,P){var x=new P([m.buffer,k.buffer,y]);g(null,x)}}))}),(function(y,m){return g(new P(m))}))},m.decodePayloadAsBinary=function(y,g,v){"function"==typeof g&&(v=g,g=null);for(var b=y,w=[];b.byteLength>0;){for(var x=new Uint8Array(b),A=0===x[0],B="",S=1;255!==x[S];S++){if(B.length>310)return v(N,0,1);B+=x[S]}b=k(b,2+B.length),B=parseInt(B);var E=k(b,0,B);if(A)try{E=String.fromCharCode.apply(null,new Uint8Array(E))}catch(y){var T=new Uint8Array(E);E="";for(S=0;S<T.length;S++)E+=String.fromCharCode(T[S])}w.push(E),b=k(b,B)}var C=w.length;w.forEach((function(y,b){v(m.decodePacket(y,g,!0),b,C)}))}}).call(m,function(){return this}())},function(y,m){y.exports=Object.keys||function(y){var m=[],g=Object.prototype.hasOwnProperty;for(var v in y)g.call(y,v)&&m.push(v);return m}},function(y,m){y.exports=function(y,m,g){var v=y.byteLength;if(m=m||0,g=g||v,y.slice)return y.slice(m,g);if(m<0&&(m+=v),g<0&&(g+=v),g>v&&(g=v),m>=v||m>=g||0===v)return new ArrayBuffer(0);for(var b=new Uint8Array(y),w=new Uint8Array(g-m),k=m,x=0;k<g;k++,x++)w[x]=b[k];return w.buffer}},function(y,m){function r(){}y.exports=function n(y,m,g){function o(y,b){if(o.count<=0)throw new Error("after called too many times");--o.count,y?(v=!0,m(y),m=g):0!==o.count||v||m(null,b)}var v=!1;return g=g||r,o.count=y,0===y?m():o}},function(y,m,g){var v;(function(y,b){!function(w){function s(y){for(var m,g,v=[],b=0,w=y.length;b<w;)(m=y.charCodeAt(b++))>=55296&&m<=56319&&b<w?56320==(64512&(g=y.charCodeAt(b++)))?v.push(((1023&m)<<10)+(1023&g)+65536):(v.push(m),b--):v.push(m);return v}function c(y,m){if(y>=55296&&y<=57343){if(m)throw Error("Lone surrogate U+"+y.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function p(y,m){return S(y>>m&63|128)}function u(y,m){if(0==(4294967168&y))return S(y);var g="";return 0==(4294965248&y)?g=S(y>>6&31|192):0==(4294901760&y)?(c(y,m)||(y=65533),g=S(y>>12&15|224),g+=p(y,6)):0==(4292870144&y)&&(g=S(y>>18&7|240),g+=p(y,12),g+=p(y,6)),g+S(63&y|128)}function f(){if(B>=A)throw Error("Invalid byte index");var y=255&x[B];if(B++,128==(192&y))return 63&y;throw Error("Invalid continuation byte")}function l(y){var m,g;if(B>A)throw Error("Invalid byte index");if(B==A)return!1;if(m=255&x[B],B++,0==(128&m))return m;if(192==(224&m)){if((g=(31&m)<<6|f())>=128)return g;throw Error("Invalid continuation byte")}if(224==(240&m)){if((g=(15&m)<<12|f()<<6|f())>=2048)return c(g,y)?g:65533;throw Error("Invalid continuation byte")}if(240==(248&m)&&((g=(7&m)<<18|f()<<12|f()<<6|f())>=65536&&g<=1114111))return g;throw Error("Invalid UTF-8 detected")}var k=("object"==typeof y&&y&&y.exports,"object"==typeof b&&b);k.global!==k&&k.window;var x,A,B,S=String.fromCharCode,E={version:"2.1.2",encode:function h(y,m){for(var g=!1!==(m=m||{}).strict,v=s(y),b=v.length,w=-1,k="";++w<b;)k+=u(v[w],g);return k},decode:function d(y,m){var g=!1!==(m=m||{}).strict;x=s(y),A=x.length,B=0;for(var v,b=[];!1!==(v=l(g));)b.push(v);return function a(y){for(var m,g=y.length,v=-1,b="";++v<g;)(m=y[v])>65535&&(b+=S((m-=65536)>>>10&1023|55296),m=56320|1023&m),b+=S(m);return b}(b)}};void 0===(v=function(){return E}.call(m,g,m,y))||(y.exports=v)}()}).call(m,g(27)(y),function(){return this}())},function(y,m){y.exports=function(y){return y.webpackPolyfill||(y.deprecate=function(){},y.paths=[],y.children=[],y.webpackPolyfill=1),y}},function(y,m){!function(){"use strict";for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),v=0;v<y.length;v++)g[y.charCodeAt(v)]=v;m.encode=function(m){var g,v=new Uint8Array(m),b=v.length,w="";for(g=0;g<b;g+=3)w+=y[v[g]>>2],w+=y[(3&v[g])<<4|v[g+1]>>4],w+=y[(15&v[g+1])<<2|v[g+2]>>6],w+=y[63&v[g+2]];return b%3==2?w=w.substring(0,w.length-1)+"=":b%3==1&&(w=w.substring(0,w.length-2)+"=="),w},m.decode=function(y){var m,v,b,w,k,x=.75*y.length,A=y.length,B=0;"="===y[y.length-1]&&(x--,"="===y[y.length-2]&&x--);var S=new ArrayBuffer(x),E=new Uint8Array(S);for(m=0;m<A;m+=4)v=g[y.charCodeAt(m)],b=g[y.charCodeAt(m+1)],w=g[y.charCodeAt(m+2)],k=g[y.charCodeAt(m+3)],E[B++]=v<<2|b>>4,E[B++]=(15&b)<<4|w>>2,E[B++]=(3&w)<<6|63&k;return S}}()},function(y,m){(function(m){function n(y){for(var m=0;m<y.length;m++){var g=y[m];if(g.buffer instanceof ArrayBuffer){var v=g.buffer;if(g.byteLength!==v.byteLength){var b=new Uint8Array(g.byteLength);b.set(new Uint8Array(v,g.byteOffset,g.byteLength)),v=b.buffer}y[m]=v}}}function r(y,m){m=m||{};var v=new g;n(y);for(var b=0;b<y.length;b++)v.append(y[b]);return m.type?v.getBlob(m.type):v.getBlob()}function o(y,m){return n(y),new Blob(y,m||{})}var g=m.BlobBuilder||m.WebKitBlobBuilder||m.MSBlobBuilder||m.MozBlobBuilder,v=function(){try{return 2===new Blob(["hi"]).size}catch(y){return!1}}(),b=v&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(y){return!1}}(),w=g&&g.prototype.append&&g.prototype.getBlob;y.exports=v?b?m.Blob:o:w?r:void 0}).call(m,function(){return this}())},function(y,m){m.encode=function(y){var m="";for(var g in y)y.hasOwnProperty(g)&&(m.length&&(m+="&"),m+=encodeURIComponent(g)+"="+encodeURIComponent(y[g]));return m},m.decode=function(y){for(var m={},g=y.split("&"),v=0,b=g.length;v<b;v++){var w=g[v].split("=");m[decodeURIComponent(w[0])]=decodeURIComponent(w[1])}return m}},function(y,m){y.exports=function(y,m){var n=function(){};n.prototype=m.prototype,y.prototype=new n,y.prototype.constructor=y}},function(y,m){"use strict";function n(y){var m="";do{m=v[y%b]+m,y=Math.floor(y/b)}while(y>0);return m}function o(){var y=n(+new Date);return y!==g?(k=0,g=y):y+"."+n(k++)}for(var g,v="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),b=64,w={},k=0,x=0;x<b;x++)w[v[x]]=x;o.encode=n,o.decode=function r(y){var m=0;for(x=0;x<y.length;x++)m=m*b+w[y.charAt(x)];return m},y.exports=o},function(y,m,g){(function(m){function r(){}function o(y){v.call(this,y),this.query=this.query||{},w||(m.___eio||(m.___eio=[]),w=m.___eio),this.index=w.length;var g=this;w.push((function(y){g.onData(y)})),this.query.j=this.index,m.document&&m.addEventListener&&m.addEventListener("beforeunload",(function(){g.script&&(g.script.onerror=r)}),!1)}var v=g(20),b=g(31);y.exports=o;var w,k=/\n/g,x=/\\n/g;b(o,v),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),v.prototype.doClose.call(this)},o.prototype.doPoll=function(){var y=this,m=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),m.async=!0,m.src=this.uri(),m.onerror=function(m){y.onError("jsonp poll error",m)};var g=document.getElementsByTagName("script")[0];g?g.parentNode.insertBefore(m,g):(document.head||document.body).appendChild(m),this.script=m,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var y=document.createElement("iframe");document.body.appendChild(y),document.body.removeChild(y)}),100)},o.prototype.doWrite=function(y,m){function n(){r(),m()}function r(){if(g.iframe)try{g.form.removeChild(g.iframe)}catch(y){g.onError("jsonp polling iframe removal error",y)}try{var y='<iframe src="javascript:0" name="'+g.iframeId+'">';v=document.createElement(y)}catch(y){(v=document.createElement("iframe")).name=g.iframeId,v.src="javascript:0"}v.id=g.iframeId,g.form.appendChild(v),g.iframe=v}var g=this;if(!this.form){var v,b=document.createElement("form"),w=document.createElement("textarea"),A=this.iframeId="eio_iframe_"+this.index;b.className="socketio",b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",b.target=A,b.method="POST",b.setAttribute("accept-charset","utf-8"),w.name="d",b.appendChild(w),document.body.appendChild(b),this.form=b,this.area=w}this.form.action=this.uri(),r(),y=y.replace(x,"\\\n"),this.area.value=y.replace(k,"\\n");try{this.form.submit()}catch(y){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===g.iframe.readyState&&n()}:this.iframe.onload=n}}).call(m,function(){return this}())},function(y,m,g){(function(m){function r(y){y&&y.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=y.perMessageDeflate,this.usingBrowserWebSocket=S&&!y.forceNode,this.protocols=y.protocols,this.usingBrowserWebSocket||(E=v),b.call(this,y)}var v,b=g(21),w=g(22),k=g(30),x=g(31),A=g(32),B=g(3)("engine.io-client:websocket"),S=m.WebSocket||m.MozWebSocket;if("undefined"==typeof window)try{v=g(35)}catch(y){}var E=S;E||"undefined"!=typeof window||(E=v),y.exports=r,x(r,b),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var y=this.uri(),m=this.protocols,g={agent:this.agent,perMessageDeflate:this.perMessageDeflate};g.pfx=this.pfx,g.key=this.key,g.passphrase=this.passphrase,g.cert=this.cert,g.ca=this.ca,g.ciphers=this.ciphers,g.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(g.headers=this.extraHeaders),this.localAddress&&(g.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?m?new E(y,m):new E(y):new E(y,m,g)}catch(y){return this.emit("error",y)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var y=this;this.ws.onopen=function(){y.onOpen()},this.ws.onclose=function(){y.onClose()},this.ws.onmessage=function(m){y.onData(m.data)},this.ws.onerror=function(m){y.onError("websocket error",m)}},r.prototype.write=function(y){var g=this;this.writable=!1;for(var v=y.length,b=0,k=v;b<k;b++)!function(y){w.encodePacket(y,g.supportsBinary,(function(b){if(!g.usingBrowserWebSocket){var w={};if(y.options&&(w.compress=y.options.compress),g.perMessageDeflate)("string"==typeof b?m.Buffer.byteLength(b):b.length)<g.perMessageDeflate.threshold&&(w.compress=!1)}try{g.usingBrowserWebSocket?g.ws.send(b):g.ws.send(b,w)}catch(y){B("websocket closed before onclose event")}--v||(g.emit("flush"),setTimeout((function(){g.writable=!0,g.emit("drain")}),0))}))}(y[b])},r.prototype.onClose=function(){b.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var y=this.query||{},m=this.secure?"wss":"ws",g="";return this.port&&("wss"===m&&443!==Number(this.port)||"ws"===m&&80!==Number(this.port))&&(g=":"+this.port),this.timestampRequests&&(y[this.timestampParam]=A()),this.supportsBinary||(y.b64=1),(y=k.encode(y)).length&&(y="?"+y),m+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+g+this.path+y},r.prototype.check=function(){return!(!E||"__initialize"in E&&this.name===r.prototype.name)}}).call(m,function(){return this}())},function(y,m){},function(y,m){var g=[].indexOf;y.exports=function(y,m){if(g)return y.indexOf(m);for(var v=0;v<y.length;++v)if(y[v]===m)return v;return-1}},function(y,m,g){"use strict";function r(y,m,g){this.io=y,this.nsp=m,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,g&&g.query&&(this.query=g.query),this.io.autoConnect&&this.open()}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},b=g(7),w=g(8),k=g(38),x=g(39),A=g(40),B=g(3)("socket.io-client:socket"),S=g(30);y.exports=r;var E={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},T=w.prototype.emit;w(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var y=this.io;this.subs=[x(y,"open",A(this,"onopen")),x(y,"packet",A(this,"onpacket")),x(y,"close",A(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},r.prototype.send=function(){var y=k(arguments);return y.unshift("message"),this.emit.apply(this,y),this},r.prototype.emit=function(y){if(E.hasOwnProperty(y))return T.apply(this,arguments),this;var m=k(arguments),g={type:b.EVENT,data:m,options:{}};return g.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof m[m.length-1]&&(B("emitting packet with ack id %d",this.ids),this.acks[this.ids]=m.pop(),g.id=this.ids++),this.connected?this.packet(g):this.sendBuffer.push(g),delete this.flags,this},r.prototype.packet=function(y){y.nsp=this.nsp,this.io.packet(y)},r.prototype.onopen=function(){if(B("transport is open - connecting"),"/"!==this.nsp)if(this.query){var y="object"===v(this.query)?S.encode(this.query):this.query;B("sending connect packet with query %s",y),this.packet({type:b.CONNECT,query:y})}else this.packet({type:b.CONNECT})},r.prototype.onclose=function(y){B("close (%s)",y),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",y)},r.prototype.onpacket=function(y){if(y.nsp===this.nsp)switch(y.type){case b.CONNECT:this.onconnect();break;case b.EVENT:case b.BINARY_EVENT:this.onevent(y);break;case b.ACK:case b.BINARY_ACK:this.onack(y);break;case b.DISCONNECT:this.ondisconnect();break;case b.ERROR:this.emit("error",y.data)}},r.prototype.onevent=function(y){var m=y.data||[];B("emitting event %j",m),null!=y.id&&(B("attaching ack callback to event"),m.push(this.ack(y.id))),this.connected?T.apply(this,m):this.receiveBuffer.push(m)},r.prototype.ack=function(y){var m=this,g=!1;return function(){if(!g){g=!0;var v=k(arguments);B("sending ack %j",v),m.packet({type:b.ACK,id:y,data:v})}}},r.prototype.onack=function(y){var m=this.acks[y.id];"function"==typeof m?(B("calling ack %s with %j",y.id,y.data),m.apply(this,y.data),delete this.acks[y.id]):B("bad ack %s",y.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var y;for(y=0;y<this.receiveBuffer.length;y++)T.apply(this,this.receiveBuffer[y]);for(this.receiveBuffer=[],y=0;y<this.sendBuffer.length;y++)this.packet(this.sendBuffer[y]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){B("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var y=0;y<this.subs.length;y++)this.subs[y].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(B("performing disconnect (%s)",this.nsp),this.packet({type:b.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(y){return this.flags=this.flags||{},this.flags.compress=y,this}},function(y,m){y.exports=function n(y,m){for(var g=[],v=(m=m||0)||0;v<y.length;v++)g[v-m]=y[v];return g}},function(y,m){"use strict";y.exports=function n(y,m,g){return y.on(m,g),{destroy:function(){y.removeListener(m,g)}}}},function(y,m){var g=[].slice;y.exports=function(y,m){if("string"==typeof m&&(m=y[m]),"function"!=typeof m)throw new Error("bind() requires a function");var v=g.call(arguments,2);return function(){return m.apply(y,v.concat(g.call(arguments)))}}},function(y,m){function n(y){y=y||{},this.ms=y.min||100,this.max=y.max||1e4,this.factor=y.factor||2,this.jitter=y.jitter>0&&y.jitter<=1?y.jitter:0,this.attempts=0}y.exports=n,n.prototype.duration=function(){var y=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var m=Math.random(),g=Math.floor(m*this.jitter*y);y=0==(1&Math.floor(10*m))?y-g:y+g}return 0|Math.min(y,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(y){this.ms=y},n.prototype.setMax=function(y){this.max=y},n.prototype.setJitter=function(y){this.jitter=y}}])}));var PlayerMovement=pc.createScript("PlayerMovement");PlayerMovement.attributes.add("movementSpeed",{type:"number",default:.025}),PlayerMovement.attributes.add("movementMultiplier",{type:"number",default:5}),PlayerMovement.attributes.add("jumpPower",{type:"number",default:200}),PlayerMovement.attributes.add("raycastPlayerBase",{type:"entity"}),PlayerMovement.attributes.add("cameraEntity",{type:"entity"}),PlayerMovement.prototype.initialize=function(){this.eulers=new pc.Vec3,this.force=new pc.Vec3,this.jumping={state:!1},this.running={state:!1}},PlayerMovement.prototype.update=function(e){var t=this.app,i=this.force,s=this.cameraEntity.forward,a=this.cameraEntity.right,r=0,n=0;"CANVAS"==document.activeElement.tagName&&(t.keyboard.isPressed(pc.KEY_W)&&(r+=s.x,n+=s.z),t.keyboard.isPressed(pc.KEY_E)&&this.app.root.findByName("Brunnen").sound.play("geil"),t.keyboard.isPressed(pc.KEY_ESCAPE)&&(this.app.root.findByName("2D Screen").enabled=!0),t.keyboard.isPressed(pc.KEY_A)&&(r-=a.x,n-=a.z),t.keyboard.isPressed(pc.KEY_S)&&(r-=s.x,n-=s.z),t.keyboard.isPressed(pc.KEY_D)&&(r+=a.x,n+=a.z),t.keyboard.isPressed(pc.KEY_SHIFT)?this.running.state=!0:this.running.state=!1),t.keyboard.wasPressed(pc.KEY_SPACE)?!1===this.jumping.state&&(this.entity.rigidbody.applyImpulse(0,this.jumpPower,0),this.jumping.state=!0):!0===this.jumping.state&&null!==this._checkBelow()&&(this.jumping.state=!1),0===r&&0===n||(this._rotatePlayer(),r*=e,n*=e,!0===this.running.state?i.set(r,0,n).normalize().scale(this.movementSpeed*this.movementMultiplier):i.set(r,0,n).normalize().scale(this.movementSpeed),this.entity.translate(i),this.entity.rigidbody.applyForce(i),this.entity.rigidbody.syncEntityToBody())},PlayerMovement.prototype._rotatePlayer=function(){var e=this.cameraEntity.script.PlayerCameraMovement.eulers.x,t=new pc.Vec3(0,e,0);this.entity.setEulerAngles(t),this.entity.rigidbody.syncEntityToBody()},PlayerMovement.prototype._checkBelow=function(){return this.app.systems.rigidbody.raycastFirst(this.entity.getPosition(),this.raycastPlayerBase.getPosition())};var oldpoint,PlayerCameraMovement=pc.createScript("PlayerCameraMovement"),deltaTime=0;PlayerCameraMovement.attributes.add("mouseSensitivity",{type:"number",default:1.33}),PlayerCameraMovement.attributes.add("viewEntity",{type:"entity"}),PlayerCameraMovement.attributes.add("cameraTargetEntity",{type:"entity"}),PlayerCameraMovement.attributes.add("raycastCameraClip",{type:"entity"}),PlayerCameraMovement.prototype.initialize=function(){this.eulers=new pc.Vec3;var e=this.app;e.mouse.on("mousemove",this._onMouseMove,this),e.mouse.on("mousedown",(function(){"CANVAS"==document.activeElement.tagName&&e.mouse.enablePointerLock()}),this),e.keyboard.on("keydown",(function(e){}))},PlayerCameraMovement.prototype.update=function(e){deltaTime=e;var t=this.eulers.x+180,a=this.eulers.y,i=new pc.Vec3(-a,t,0);this.viewEntity.setEulerAngles(i),this.entity.setPosition(this._getWorldPoint()),this.entity.lookAt(this.cameraTargetEntity.getPosition())},PlayerCameraMovement.prototype._onMouseMove=function(e){pc.Mouse.isPointerLocked()&&(this.eulers.x-=e.dx/5,this.eulers.y=pc.math.clamp(this.eulers.y+=e.dy/5,-19,45))},PlayerCameraMovement.prototype._getWorldPoint=function(){var e=this.viewEntity.getPosition(),t=this.raycastCameraClip.getPosition(),a=this.app.systems.rigidbody.raycastFirst(e,t);return null!==a?a.point:t};var PlayerAnimation=pc.createScript("PlayerAnimation"),direction="Idle";PlayerAnimation.attributes.add("blendDuration",{type:"number",default:.25}),PlayerAnimation.prototype.initialize=function(){var e=this.app;e.keyboard.on(pc.EVENT_KEYDOWN,this._keyChange,this),e.keyboard.on(pc.EVENT_KEYUP,this._keyChange,this),this.setState(direction)},PlayerAnimation.prototype.update=function(e){},PlayerAnimation.prototype.setState=function(e){this.state=e,this.entity.animation.play(e,this.blendDuration)},PlayerAnimation.prototype._checkKey=function(){var e=this.app;"CANVAS"==document.activeElement.tagName&&(direction=e.keyboard.isPressed(pc.KEY_W)&&!1===e.keyboard.isPressed(pc.KEY_S)?e.keyboard.isPressed(pc.KEY_A)&&!1===e.keyboard.isPressed(pc.KEY_D)?"Jog Forward Left":e.keyboard.isPressed(pc.KEY_D)&&!1===e.keyboard.isPressed(pc.KEY_A)?"Jog Forward Right":"Jog Forward":e.keyboard.isPressed(pc.KEY_S)&&!1===e.keyboard.isPressed(pc.KEY_W)?e.keyboard.isPressed(pc.KEY_A)&&!1===e.keyboard.isPressed(pc.KEY_D)?"Jog Backward Left":e.keyboard.isPressed(pc.KEY_D)&&!1===e.keyboard.isPressed(pc.KEY_A)?"Jog Backward Right":"Jog Backward":e.keyboard.isPressed(pc.KEY_A)&&!1===e.keyboard.isPressed(pc.KEY_D)?"Jog Left":e.keyboard.isPressed(pc.KEY_D)&&!1===e.keyboard.isPressed(pc.KEY_A)?"Jog Right":"Idle")},PlayerAnimation.prototype._keyChange=function(e){var i=direction;this._checkKey(),i!==direction&&this.setState(direction)};var Network=pc.createScript("network");PlayerMovement.attributes.add("serverAddress",{type:"text",default:"https://glitch.com/~celestial-gold-straw"}),Network.id=null,Network.socket=null;var oldData=null;Network.prototype.initialize=function(){this.player=this.app.root.findByName("Player"),this.other=this.app.root.findByName("Other");var t=io.connect("https://celestial-gold-straw.glitch.me");Network.socket=t,t.emit("initialize");var e=this;t.on("playerData",(function(t){e.initializePlayers(t)})),t.on("playerJoined",(function(t){e.addPlayer(t)})),t.on("playerMoved",(function(t){e.movePlayer(t)})),t.on("killPlayer",(function(t){e.removePlayer(t)}))},Network.prototype.initializePlayers=function(t){for(var e in this.players=t.players,Network.id=t.id,this.players)e!=Network.id&&(this.players[e].entity=this.createPlayerEntity(this.players[e]));this.initialized=!0,console.log("initialized")},Network.prototype.addPlayer=function(t){this.players[t.id]=t,this.players[t.id].entity=this.createPlayerEntity(t)},Network.prototype.movePlayer=function(t){this.initialized&&!this.players[t.id].deleted&&(this.players[t.id].entity.rigidbody.teleport(t.x,t.y,t.z,t.rotx,t.roty,t.rotz),this.players[t.id].entity.children[0].animation.data.currAnim!=t.currAnim&&this.players[t.id].entity.children[0].animation.play(t.currAnim,.25),this.players[t.id].entity.children[2].element.text!=t.username&&(this.players[t.id].entity.children[2].element.text=t.username))},Network.prototype.removePlayer=function(t){this.players[t].entity&&(this.players[t].entity.destroy(),this.players[t].deleted=!0)},Network.prototype.createPlayerEntity=function(t){var e=this.other.clone();return e.enabled=!0,this.other.getParent().addChild(e),t&&(e.rigidbody.teleport(t.x,t.y,t.z),e.setEulerAngles(new pc.Vec3(t.rotx,t.roty,t.rotz))),e},Network.prototype.update=function(t){this.updatePosition()},Network.prototype.updatePosition=function(){if(this.initialized){var t=this.player.getPosition(),e=this.player.getEulerAngles();let i=this.app.root.findByName("MyUserName").element.text;Network.socket.emit("positionUpdate",{id:Network.id,x:t.x,y:t.y,z:t.z,rotx:e.x,roty:e.y,rotz:e.z,username:i,currAnim:this.app.root.findByName("Model").animation.currAnim})}};var NameScript=pc.createScript("nameScript");NameScript.prototype.initialize=function(){camera=this.app.root.findByName("Camera")},NameScript.prototype.update=function(t){this.entity.setRotation(camera.getRotation())};var Respawn=pc.createScript("respawn");Respawn.prototype.initialize=function(){},Respawn.prototype.update=function(t){this.entity.getLocalPosition().y<-.2&&(this.entity.sound.play("scream"),this.entity.getLocalPosition().y<-1.5&&(console.log("below map"),this.entity.rigidbody.teleport(0,.5,0)))};var BtnStates=pc.createScript("btnStates");BtnStates.attributes.add("hoverAsset",{type:"asset",assetType:"texture"}),BtnStates.attributes.add("activeAsset",{type:"asset",assetType:"texture"}),BtnStates.prototype.initialize=function(){this.originalTexture=this.entity.element.textureAsset,this.hovered=!1,this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("mouseup",this.onRelease,this),this.entity.element.on("mouseleave",this.onLeave,this),this.entity.element.on("touchstart",this.onPress,this),this.entity.element.on("touchend",this.onRelease,this)},BtnStates.prototype.onEnter=function(e){this.hovered=!0,e.element.textureAsset=this.hoverAsset,document.body.style.cursor="pointer"},BtnStates.prototype.onLeave=function(e){this.hovered=!1,e.element.textureAsset=this.originalTexture,document.body.style.cursor="default"},BtnStates.prototype.onPress=function(e){if(e.element.textureAsset=this.activeAsset,"btn-fps"==e.element.entity.name)console.log("fps clicked"),this.app.root.findByName("RaycastCameraClip").setLocalPosition(0,.375,.29),this.app.root.findByName("2D Screen").enabled=!1;else if("btn-3rd"==e.element.entity.name)console.log("3rd clicked"),this.app.root.findByName("RaycastCameraClip").setLocalPosition(0,.45,1.5),this.app.root.findByName("2D Screen").enabled=!1;else if("btn-name"==e.element.entity.name){console.log("set name clicked");let e=prompt("Please enter your name","Harry Potter");this.app.root.findByName("MyUserName").element.text=e}},BtnStates.prototype.onRelease=function(e){e.element.textureAsset=this.hovered?this.hoverAsset:this.originalTexture};var Video=pc.createScript("video");Video.attributes.add("playEvent",{title:"Play Event",description:"Event that is fired as soon as the video texture is ready to play.",type:"string",default:""}),Video.prototype.initialize=function(){var e=this.app,t=document.createElement("video");t.autoplay=!0,t.crossOrigin="anonymous",t.loop=!0,t.playsInline=!0,navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(i){t.srcObject=i;var o=t.style;o.width="1px",o.height="1px",o.position="absolute",o.opacity="0",o.zIndex="-1000",o.pointerEvents="none",document.body.appendChild(t),this.videoTexture=new pc.Texture(e.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,minFilter:pc.FILTER_LINEAR_MIPMAP_LINEAR,magFilter:pc.FILTER_LINEAR,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE,mipmaps:!0,autoMipmap:!0}),this.videoTexture.setSource(t)}.bind(this)).catch((function(e){console.log("Something went wrong!")})),t.addEventListener("canplay",function(t){console.log("canplay"),e.fire(this.playEvent,this.videoTexture)}.bind(this))},Video.prototype.update=function(e){this.videoTexture&&this.videoTexture.upload()};var Screen=pc.createScript("screen");Screen.attributes.add("screenMaterial",{title:"Screen Material",description:"The screen material of the TV that displays the video texture.",type:"asset",assetType:"material"}),Screen.attributes.add("playEvent",{title:"Play Event",description:"Set the TV screen material emissive map on this event.",type:"string",default:""}),Screen.prototype.initialize=function(){this.app.on(this.playEvent,(function(e){var t=this.screenMaterial.resource;t.emissiveMap=e,t.update()}),this)};